<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wetter Widget</title>
<style>
html,body{
  margin:0;padding:0;
  width:100%;height:100%;
  font-family:Arial, sans-serif;
  color:#fff;
  background:#000 no-repeat center center;
  background-size:cover;
  text-align:center;
  display:flex;flex-direction:column;justify-content:center;
}
.temp{font-size:5rem;font-weight:bold;}
.city{font-size:2rem;margin-bottom:10px;}
.desc{font-size:1.5rem;margin-bottom:20px;}
</style>
</head>
<body>
<div class="city" id="city">-</div>
<div class="temp" id="temp">--°</div>
<div class="desc" id="desc">Lädt...</div>

<script>
const API_KEY = 'DEIN_API_KEY_HIER'; // OpenWeatherMap API
const CITY = 'Ahaus';
const URL = `https://api.openweathermap.org/data/2.5/weather?q=${CITY}&appid=${API_KEY}&units=metric&lang=de`;

const bgMap = {
  clear:'bg_clear.jpg',
  clouds:'bg_clouds.jpg',
  rain:'bg_rain.jpg',
  snow:'bg_snow.jpg',
  thunder:'bg_thunder.jpg',
  fog:'bg_fog.jpg'
};

function pickBackground(condition){
  if(condition.includes('thunder')) return bgMap.thunder;
  if(condition.includes('snow')) return bgMap.snow;
  if(condition.includes('rain') || condition.includes('drizzle')) return bgMap.rain;
  if(condition.includes('cloud')) return bgMap.clouds;
  if(condition.includes('mist') || condition.includes('fog') || condition.includes('haze')) return bgMap.fog;
  return bgMap.clear;
}

async function loadWeather(){
  try{
    const res = await fetch(URL);
    const data = await res.json();
    document.getElementById('city').textContent = data.name;
    document.getElementById('temp').textContent = Math.round(data.main.temp)+'°';
    document.getElementById('desc').textContent = data.weather[0].description;

    const main = data.weather[0].main.toLowerCase();
    const bg = pickBackground(main);
    document.documentElement.style.backgroundImage = `url('${bg}?v=${Date.now()}')`;
  }catch(e){
    document.getElementById('desc').textContent = 'Fehler beim Laden';
  }
}

loadWeather();
setInterval(loadWeather, 10*60*1000);
</script>
</body>
</html>
