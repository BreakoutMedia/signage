<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Wetter â€“ Ahaus</title>
<style>
html, body {
  margin:0;
  height:100%;
  width:100%;
  background: url('bg_weather.jpg') no-repeat center center fixed;
  background-size: cover;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  color:#fff;
  text-shadow: 0 2px 6px rgba(0,0,0,0.8);
}
.container {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  height:100%;
  padding: 40px 60px;
  box-sizing: border-box;
}
header {
  display:flex;
  justify-content: space-between;
  align-items: center;
}
header h1 {
  font-size: 60px;
  margin:0;
}
.content {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
}
.left .label {font-size:44px}
.temp-row {display:flex;align-items:center;gap:20px;margin-top:8px}
.temp {font-size:160px;font-weight:700}
.icon {font-size:90px}
.feels {font-size:36px;margin-top:14px}
.right {max-width: 800px}
.right h2 {font-size:56px;margin:0}
.grid {margin-top:20px;display:grid;grid-template-columns:1fr 1fr;gap:20px 80px;font-size:34px}
footer {
  font-size:28px;
}
</style>
</head>
<body>
<div class="container">
  <header>
    <h1>Ahaus Wetter</h1>
    <div id="updated">--:--</div>
  </header>
  <div class="content">
    <div class="left">
      <div class="label">Jetzt</div>
      <div class="temp-row">
        <div class="temp" id="temp">--Â°</div>
        <div class="icon" id="icon">â˜€ï¸</div>
      </div>
      <div class="feels" id="feels">GefÃ¼hlt --Â°</div>
    </div>
    <div class="right">
      <h2 id="cond">â€”</h2>
      <div class="grid">
        <div>Niederschlag:</div><div id="prec">â€” %</div>
        <div>Feuchtigkeit:</div><div id="humid">â€” %</div>
        <div>Wind:</div><div id="wind">â€” km/h</div>
        <div>LuftqualitÃ¤t:</div><div id="aqiText">â€”</div>
      </div>
    </div>
  </div>
  <footer>
    Aktualisiert automatisch Â· Quelle: Open-Meteo
  </footer>
</div>
<script>
const CITY_NAME='Ahaus'; const LAT=52.079; const LON=6.965;
function wmoToText(c){const m={0:'Klar',1:'Ãœberwiegend klar',2:'Wolkig',3:'Bedeckt',45:'Nebel',48:'Nebel',51:'Niesel',53:'Niesel',55:'Niesel',61:'Regen',63:'Regen',65:'Starker Regen',66:'Gefrierender Regen',67:'Gefrierender Regen',71:'Schnee',73:'Schnee',75:'Starker Schnee',77:'SchneekÃ¶rner',80:'Schauer',81:'Schauer',82:'Starke Schauer',85:'Schneeschauer',86:'Starke Schneeschauer',95:'Gewitter',96:'Gewitter',99:'Gewitter'};return m[c]||'Wetter'}
function wmoToEmoji(c,n){const e={0:n?'ğŸŒ™':'â˜€ï¸',1:n?'ğŸŒ™':'ğŸŒ¤ï¸',2:'â›…',3:'â˜ï¸',45:'ğŸŒ«ï¸',48:'ğŸŒ«ï¸',51:'ğŸŒ¦ï¸',53:'ğŸŒ¦ï¸',55:'ğŸŒ¦ï¸',61:'ğŸŒ§ï¸',63:'ğŸŒ§ï¸',65:'ğŸŒ§ï¸',66:'ğŸŒ§ï¸',67:'ğŸŒ§ï¸',71:'ğŸŒ¨ï¸',73:'ğŸŒ¨ï¸',75:'â„ï¸',80:'ğŸŒ¦ï¸',81:'ğŸŒ¦ï¸',82:'ğŸŒ§ï¸',95:'â›ˆï¸',96:'â›ˆï¸',99:'â›ˆï¸'};return e[c]||'â˜ï¸'}
function pm25ToQuality(pm){if(pm==null)return'â€”';if(pm<=12)return'Gut';if(pm<=35.4)return'Mittel';return'Schlecht'}
async function loadData(){
  const wURL=`https://api.open-meteo.com/v1/forecast?latitude=${LAT}&longitude=${LON}&current_weather=true&hourly=temperature_2m,apparent_temperature,relative_humidity_2m,precipitation_probability,weathercode,windspeed_10m&timezone=auto`;
  const aURL=`https://air-quality-api.open-meteo.com/v1/air-quality?latitude=${LAT}&longitude=${LON}&hourly=pm2_5&timezone=auto`;
  const [wr,ar]=await Promise.all([fetch(wURL),fetch(aURL)]);
  const weather=await wr.json(); const air=await ar.json();
  const cw=weather.current_weather||{}; const h=weather.hourly||{};
  let idx=0;if(h.time&&h.time.length){const iso=new Date().toISOString().slice(0,13);idx=h.time.findIndex(t=>t.slice(0,13)===iso);if(idx<0) idx=h.time.length-1;}
  const temp=Math.round(cw.temperature ?? h.temperature_2m?.[idx] ?? 0);
  const feels=Math.round(h.apparent_temperature?.[idx] ?? temp);
  const hum=Math.round(h.relative_humidity_2m?.[idx] ?? 0);
  const prec=Math.round(h.precipitation_probability?.[idx] ?? 0);
  const wind=Math.round(cw.windspeed ?? h.windspeed_10m?.[idx] ?? 0);
  const code=cw.weathercode ?? h.weathercode?.[idx] ?? 3;
  let pm25=null;if(air&&air.hourly&&air.hourly.pm2_5){let aidx=0;if(air.hourly.time){const iso=new Date().toISOString().slice(0,13);aidx=air.hourly.time.findIndex(t=>t.slice(0,13)===iso);if(aidx<0)aidx=air.hourly.time.length-1;}pm25=air.hourly.pm2_5[aidx];}
  document.getElementById('temp').textContent=temp+'Â°';
  document.getElementById('feels').textContent='GefÃ¼hlt '+feels+'Â°';
  document.getElementById('cond').textContent=wmoToText(Number(code));
  document.getElementById('prec').textContent=(prec??0)+' %';
  document.getElementById('humid').textContent=(hum??0)+' %';
  document.getElementById('wind').textContent=(wind??0)+' km/h';
  document.getElementById('icon').textContent=wmoToEmoji(Number(code),false);
  document.getElementById('aqiText').textContent=pm25ToQuality(pm25);
  document.getElementById('updated').textContent=new Date().toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'});
}
loadData();setInterval(loadData,10*60*1000);
</script>
</body>
</html>
