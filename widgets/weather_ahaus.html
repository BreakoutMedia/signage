<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Wetter – Ahaus</title>
<style>
:root{
  --fg:#0c1a2a; --fg-strong:#0a1320; --muted:#54606e; --chip:#e7f0f7;
  --dot-good:#2ecc71; --dot-medium:#f1c40f; --dot-bad:#e74c3c;
}
html,body{margin:0;height:100%;background:#eaf2f8;color:var(--fg);font-family:system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif}
.wrap{position:relative;height:100%;display:flex;flex-direction:column;justify-content:space-between;background:linear-gradient(to bottom, rgba(255,255,255,0.85), rgba(255,255,255,0.85))}
header{display:flex;align-items:center;justify-content:space-between;padding:32px 48px 8px}
header h1{margin:0;font-size:64px;letter-spacing:.5px;color:var(--fg-strong)}
.menu-dots{width:8px;height:8px;border-radius:50%;background:var(--muted);box-shadow:0 -14px 0 0 var(--muted),0 14px 0 0 var(--muted)}
.content{display:flex;align-items:flex-start;justify-content:space-between;padding:16px 48px;flex:1}
.left{display:flex;flex-direction:column;gap:8px}
.left .label{font-size:44px;color:var(--muted)}
.temp-row{display:flex;align-items:center;gap:20px;margin-top:8px}
.temp{font-size:180px;font-weight:700;line-height:1;color:#000}
.icon{width:120px;height:120px;border-radius:24px;display:flex;align-items:center;justify-content:center;font-size:80px}
.feels{font-size:40px;color:var(--muted);margin-top:14px}
.right{text-align:left;margin-left:48px;flex:0 0 880px}
.right h2{margin:0;font-size:64px;color:#000;font-weight:700}
.grid{margin-top:24px;display:grid;grid-template-columns:1fr 1fr;gap:22px 120px;font-size:40px}
.grid .k{color:var(--muted)} .grid .v{color:#000}
.aqi{display:inline-flex;align-items:center;gap:14px}
.dot{width:24px;height:24px;border-radius:50%;background:var(--dot-good);border:2px solid rgba(0,0,0,.1);box-shadow:0 1px 2px rgba(0,0,0,.15) inset}
footer{padding:24px 48px 40px;display:flex;align-items:center;gap:30px;opacity:.9}
.chip{background:var(--chip);color:#143652;padding:12px 18px;border-radius:14px;font-size:28px}
.bg{position:absolute;inset:0;background:linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.85)), radial-gradient(80% 60% at 50% 20%, #dff0ff, transparent 60%);z-index:-1}
</style>
</head>
<body>
<div class="wrap">
  <div class="bg"></div>
  <header>
    <h1>Wetter</h1>
    <div class="menu-dots" aria-hidden="true"></div>
  </header>
  <div class="content">
    <div class="left">
      <div class="label">Jetzt</div>
      <div class="temp-row"><div class="temp" id="temp">--°</div><div class="icon" id="icon">☁️</div></div>
      <div class="feels" id="feels">Gefühlte Temperatur: --°</div>
    </div>
    <div class="right">
      <h2 id="cond">—</h2>
      <div class="grid">
        <div class="k">Niederschlag:</div><div class="v" id="prec">— %</div>
        <div class="k">Luftfeuchtigkeit:</div><div class="v" id="humid">— %</div>
        <div class="k">Wind:</div><div class="v" id="wind">— km/h</div>
        <div class="k">Luftqualität:</div><div class="v aqi"><span id="aqiText">—</span><span class="dot" id="aqiDot"></span></div>
      </div>
    </div>
  </div>
  <footer>
    <div class="chip" id="place">Ahaus</div>
    <div class="chip" id="updated">Aktualisiert: --:--</div>
  </footer>
</div>
<script>
const CITY_NAME='Ahaus'; const LAT=52.079; const LON=6.965; const REFRESH_MIN=10;
const pad=n=>(n<10?'0':'')+n; const hhmm=d=>pad(d.getHours())+':'+pad(d.getMinutes());
function wmoToText(c){const m={0:'Klar',1:'Überwiegend klar',2:'Wolkig',3:'Bedeckt',45:'Nebel',48:'Nebel',51:'Niesel',53:'Niesel',55:'Niesel',61:'Regen',63:'Regen',65:'Starker Regen',66:'Gefrierender Regen',67:'Gefrierender Regen',71:'Schnee',73:'Schnee',75:'Starker Schnee',77:'Schneekörner',80:'Schauer',81:'Schauer',82:'Starke Schauer',85:'Schneeschauer',86:'Starke Schneeschauer',95:'Gewitter',96:'Gewitter',99:'Gewitter'};return m[c]||'Wetter'}
function wmoToEmoji(c,n){const e={0:n?'🌙':'☀️',1:n?'🌙':'🌤️',2:'⛅',3:'☁️',45:'🌫️',48:'🌫️',51:'🌦️',53:'🌦️',55:'🌦️',61:'🌧️',63:'🌧️',65:'🌧️',66:'🌧️',67:'🌧️',71:'🌨️',73:'🌨️',75:'❄️',80:'🌦️',81:'🌦️',82:'🌧️',95:'⛈️',96:'⛈️',99:'⛈️'};return e[c]||'☁️'}
function pm25ToQuality(pm){if(pm==null)return{text:'—',color:'#95a5a6'};if(pm<=12)return{text:'Gut',color:'#2ecc71'};if(pm<=35.4)return{text:'Mittel',color:'#f1c40f'};return{text:'Schlecht',color:'#e74c3c'}}
async function loadData(){
  const wURL=`https://api.open-meteo.com/v1/forecast?latitude=${LAT}&longitude=${LON}&current_weather=true&hourly=temperature_2m,apparent_temperature,relative_humidity_2m,precipitation_probability,weathercode,windspeed_10m&timezone=auto`;
  const aURL=`https://air-quality-api.open-meteo.com/v1/air-quality?latitude=${LAT}&longitude=${LON}&hourly=pm2_5&timezone=auto`;
  const [wr,ar]=await Promise.all([fetch(wURL,{cache:'no-store'}),fetch(aURL,{cache:'no-store'})]);
  const weather=await wr.json(); const air=await ar.json();
  const cw=weather.current_weather||{}; const h=weather.hourly||{};
  let idx=0; if(h.time&&h.time.length){const iso=new Date().toISOString().slice(0,13); idx=h.time.findIndex(t=>t.slice(0,13)===iso); if(idx<0) idx=h.time.length-1;}
  const temp=Math.round(cw.temperature ?? h.temperature_2m?.[idx] ?? 0);
  const feels=Math.round(h.apparent_temperature?.[idx] ?? temp);
  const hum=Math.round(h.relative_humidity_2m?.[idx] ?? 0);
  const prec=Math.round(h.precipitation_probability?.[idx] ?? 0);
  const wind=Math.round(cw.windspeed ?? h.windspeed_10m?.[idx] ?? 0);
  const code=cw.weathercode ?? h.weathercode?.[idx] ?? 3;
  let pm25=null; if(air&&air.hourly&&air.hourly.pm2_5){let aidx=0; if(air.hourly.time){const iso=new Date().toISOString().slice(0,13); aidx=air.hourly.time.findIndex(t=>t.slice(0,13)===iso); if(aidx<0) aidx=air.hourly.time.length-1;} pm25=air.hourly.pm2_5[aidx];}
  const aqi=pm25ToQuality(pm25);
  document.getElementById('place').textContent=CITY_NAME;
  document.getElementById('temp').textContent=temp+'°';
  document.getElementById('feels').textContent='Gefühlte Temperatur: '+feels+'°';
  document.getElementById('cond').textContent=wmoToText(Number(code));
  document.getElementById('prec').textContent=(prec??0)+' %';
  document.getElementById('humid').textContent=(hum??0)+' %';
  document.getElementById('wind').textContent=(wind??0)+' km/h';
  const hour=new Date().getHours(); const night=(hour<6||hour>=21);
  document.getElementById('icon').textContent=wmoToEmoji(Number(code), night);
  document.getElementById('aqiText').textContent=aqi.text;
  document.getElementById('aqiDot').style.background=aqi.color;
  document.getElementById('updated').textContent='Aktualisiert: '+(new Date().toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'}));
}
loadData(); setInterval(loadData, 10*60*1000);
</script>
</body>
</html>
